<!DOCTYPE HTML>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
        <title>Loading...</title>
        <meta property="og:type" content="website">
<meta property="og:title" content="Paste on TextOnline">
<meta property="og:description" content="Free text hosting with custom URLs">
<meta name="theme-color" content="#bcc21d">
<script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
    </head>
    <body onload="start()">
        <h1 id="title">Loading...</h1>
         <label font-size:19px;" id="info">Loading...</label><br><br>
      <label font-size:15px;" id="content">Loading...</label>
    </body>
    <script>
        var faunadb = window.faunadb
  var q = faunadb.query
  var client = new faunadb.Client({
    secret: 'fnAEWN0RMFAAwFxR2C5vwBRsORnw7OriYRS0cvVd',
    domain: 'db.eu.fauna.com',
    scheme: 'https',
  })

function start(){

    var segments = window.location.href.split('?')
let name = segments[1]

client.query(
  q.Get(
    q.Match(q.Index('posts_by_title'), name)
  )
)
.then(function(ret){
    document.title = ret.data.titlereal + " by " + ret.data.uploader
    document.getElementById("content").innerHTML = ret.data.contents.replace(/linebreak/g, "<br>")
    document.getElementById("title").innerHTML = ret.data.titlereal
    document.getElementById("info").innerHTML = "Uploaded by <b>" + ret.data.uploader +"</b> on " + ret.data.creationdate
  })
.catch(function(e){
   document.getElementById("title").innerHTML = "Page not found."
    document.getElementById("content").style.visibility = "hidden";
    document.getElementById("info").style.visibility = "hidden";
});
    
    
}

        

    </script>
</html>
